---
const pathname = Astro.url.pathname;
const linkTo = (section: string) => (pathname === '/' ? `#${section}` : `/#${section}`);
const homeHref = pathname === '/' ? '#home' : '/#home';
---

<header class="fixed top-0 left-0 w-full z-50">
    <div class="mx-auto max-w-6xl px-4 pt-4">
        <div class="flex items-center justify-between rounded-full border border-white/10 bg-white/5 px-4 py-2 shadow-xl shadow-purple-500/10 backdrop-blur-xl transition-all duration-500">
            <a href={homeHref} class="flex items-center gap-2 text-lg font-semibold uppercase tracking-[0.35em] text-white">
                <span class="rounded-full bg-gradient-to-br from-purple-500 via-fuchsia-500 to-indigo-500 px-3 py-1 text-xs font-bold text-black">SD</span>
                <span class="hidden sm:block">Stellaris Drone</span>
            </a>
            <nav class="hidden items-center gap-10 text-sm font-medium text-gray-200 md:flex">
                <a href={linkTo('services')} class="transition-colors hover:text-white">Services</a>
                <a href={linkTo('about')} class="transition-colors hover:text-white">Expertise</a>
                <a href={linkTo('approach')} class="transition-colors hover:text-white">Approche</a>
                <a href={linkTo('contact')} class="transition-colors hover:text-white">Contact</a>
            </nav>
            <div class="hidden md:flex items-center gap-3">
                <a href={linkTo('contact')} class="rounded-full border border-white/20 px-4 py-2 text-sm font-medium text-white transition hover:border-white/40">Brochure</a>
                <a href={linkTo('contact')} class="rounded-full bg-gradient-to-r from-purple-500 via-fuchsia-500 to-indigo-500 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-purple-500/30 transition hover:scale-[1.02]">Planifier un vol</a>
            </div>
            <details class="relative flex md:hidden">
                <summary class="flex cursor-pointer list-none items-center gap-2 rounded-full border border-white/15 px-3 py-2 text-xs font-semibold uppercase tracking-[0.4em] text-gray-200">
                    Menu
                    <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fill-rule="evenodd" d="M2 6.5A1.5 1.5 0 013.5 5h13a1.5 1.5 0 110 3h-13A1.5 1.5 0 012 6.5zm0 7A1.5 1.5 0 013.5 12h13a1.5 1.5 0 110 3h-13A1.5 1.5 0 012 13.5z" clip-rule="evenodd" />
                    </svg>
                </summary>
                <div class="absolute right-0 top-12 min-w-[220px] rounded-2xl border border-white/10 bg-black/90 p-4 shadow-2xl shadow-purple-500/20 backdrop-blur-xl">
                    <nav class="flex flex-col gap-3 text-sm font-medium text-gray-200">
                        <a href={linkTo('services')} class="rounded-full px-4 py-2 transition hover:bg-white/5">Services</a>
                        <a href={linkTo('about')} class="rounded-full px-4 py-2 transition hover:bg-white/5">Expertise</a>
                        <a href={linkTo('approach')} class="rounded-full px-4 py-2 transition hover:bg-white/5">Approche</a>
                        <a href={linkTo('contact')} class="rounded-full px-4 py-2 transition hover:bg-white/5">Contact</a>
                        <a href={linkTo('contact')} class="rounded-full bg-gradient-to-r from-purple-500 via-fuchsia-500 to-indigo-500 px-4 py-2 text-center font-semibold text-white">Planifier un vol</a>
                    </nav>
                </div>
            </details>
        </div>
    </div>
</header>
